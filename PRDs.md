Product Requirements Document (PRD): Eugenia ISA - v1.0
Author: Everitt Gill & Gemini
Date: May 29, 2025
Version: 1.0

1. Overview & Goal
Product Name: Aim Assist

Goal: To create a full-stack web application that functions as an intelligent, AI-powered Inside Sales Agent (ISA) named "Eugenia" for a real estate business.

Problem Statement: Commercially available AI assistants for real estate, like Ylopo's Raiya, can be inflexible or underperforming. This project aims to replicate and improve upon the core SMS lead engagement functionality of such systems, providing a more tailored and effective tool that integrates deeply with Follow Up Boss (FUB) as the primary CRM.

Vision: The Eugenia ISA will automate the initial, time-consuming process of lead engagement and qualification. It will instantly text new leads, carry on natural, context-aware conversations to gather key information, and meticulously log all interactions back into FUB and a backup Airtable base. The primary user (the real estate agent) will manage and monitor these conversations through a dedicated web-based control panel, accessible via a unique link from within FUB itself.

2. Target User
The primary user of the Aim Assist Control Panel is the Real Estate Agent who uses Follow Up Boss as their main CRM. They are looking to increase lead conversion rates by ensuring instant and persistent follow-up, while saving time on manually texting and qualifying new or unresponsive leads.

3. Core Features (Minimum Viable Product - MVP)
The MVP will focus on creating a functional, single-user system that successfully manages AI-driven SMS conversations.

3.1. Frontend: The "Aim Assist Control Panel" (React App)
The frontend is a web-based dashboard for the agent to manage the system.

Single-Lead Focused UI: The main view will be designed to display and manage the conversation for one lead at a time. This avoids a cluttered interface and focuses the agent on the task at hand.

Navigation Bar: A simple top navigation bar will be included to ensure future scalability. Initially, it will provide access to the main view and the settings panel. Future links (e.g., Analytics, Campaigns) can be added later.

Lead Access via Unique URL: The primary method for an agent to access a specific lead's conversation will be by clicking a unique URL generated by the backend and stored in a custom field on the lead's FUB record.

Conversation Display: A clear, modern chat UI (similar to iMessage or WhatsApp) will display the full conversation history between Eugenia and the lead. Messages will be styled differently to distinguish between Eugenia (AI) and the lead.

Manual Intervention: The agent will have an input box to type and send a message as Eugenia at any point, allowing them to seamlessly take over or correct a conversation.

AI Pause Controls: The UI must have explicit buttons to pause Eugenia for the selected lead.

Pause Engagement: A button to immediately stop Eugenia from sending any further automated qualification messages to the lead. This is for when the agent wants to take over or the lead has requested a temporary pause.

(Future) Pause Nurturing: A separate control to pause long-term, drip-style nurturing sequences. For MVP, this can be combined with the main pause button.

Simplified Settings Panel: A settings UI for configurations that are relevant to the application's operation, such as the Gemini API Key and the User's Agency Name (for use in prompts). It will clearly state that FUB, Twilio, and Airtable secrets are configured on the backend.

3.2. Backend: The Engine (Node.js/Express.js Server)
The backend will handle all automation, security, and third-party API interactions.

Secure API Key Management: The backend will securely manage all secrets (FUB API Key, Twilio SID/Auth Token, Gemini API Key, Airtable API Key) using environment variables (.env file). These keys will never be exposed to the frontend.

FUB Integration:

Fetch Leads: Ability to fetch leads from FUB.

Log Communications to Texting UI: For every SMS sent by Eugenia or received from a lead, the backend will make a POST request to the FUB /textMessages endpoint. This ensures the conversation appears natively within FUB's "Text Messages" section for that lead, not just as a generic note. The custom headers (X-System, X-System-Key) provided by the user must be included in all FUB API calls.

Update Lead Data: Ability to update a lead's status (e.g., to "AI - Engaged", "AI - Paused") and add/remove tags.

Unique URL Generation & Storage: Upon first engagement with a new lead, the backend will:

Generate a unique, persistent URL for that lead's conversation page in the Eugenia Control Panel (e.g., https://your-app.com/conversation/[FUB_LEAD_ID]).

Make a PUT request to FUB to save this URL into a pre-defined custom field on that lead's record.

Twilio Integration:

Two-Number Architecture: The system implements a dual phone number setup:
1. User's Personal FUB Number: The agent's existing Follow Up Boss phone number for manual calls and texts
2. Eugenia's Dedicated Twilio Number: A separate Twilio phone number exclusively for AI assistant communications

Message Visibility & Control:
- All messages (both manual and AI-generated) will be visible in FUB's native text messaging interface
- Manual responses will only be sent through FUB as the agent
- AI responses (Eugenia) will only be sent through the custom frontend control panel
- This separation ensures clear distinction between human and AI communication while maintaining full conversation visibility

Send Outgoing SMS: Send messages generated by Gemini to leads using Eugenia's dedicated Twilio number.

Receive Incoming SMS: Provide a webhook endpoint (e.g., /webhook/twilio-sms) that Twilio will call whenever a lead sends a reply. This is the primary trigger for continuing a conversation.

Gemini Integration:

Generate context-aware, natural-sounding initial outreach and follow-up messages based on lead details and conversation history.

The prompt engineering will instruct Eugenia to identify key conversation outcomes (e.g., lead agrees to a call, lead asks to stop, lead is unavailable) so the backend can pause the AI loop.

Airtable Backup:

For every lead engaged by Eugenia, create or update a corresponding record in an Airtable "Leads" table.

For every SMS sent or received, create a new record in an Airtable "Messages" table, linked to the appropriate lead.

Automation & State Management:

New Lead Engagement Flow: A process (either automated on a schedule or triggered manually from the frontend) to identify new leads in FUB and kick off the initial engagement sequence (Gemini -> Twilio -> FUB Logging -> FUB URL update).

Auto-Pause Logic: If Eugenia's prompt analysis indicates the lead has agreed to a call or asked to pause, the backend must automatically update the lead's status in FUB to "AI - Paused" and cease sending automated messages until resumed by the agent.

4. Technical Stack
Frontend: React.js, Reactbits components or anything else needed from https://www.reactbits.dev/

Backend: Node.js with Express.js.

Primary CRM: Follow Up Boss (FUB) API.

SMS Provider: Twilio API.

AI Language Model: Google Gemini API (e.g., Gemini 1.5 Pro).

Backup Database: Airtable API.

Version Control: Git & GitHub.

Hosting:

Frontend: Netlify or Vercel (recommended for ease of deployment).

Backend: Render or Heroku (recommended for ease of deployment for Node.js apps).

5. User & System Flows
5.1. Automated New Lead Engagement Flow
A new lead is created in Follow Up Boss.

The backend's "Engage New Leads" process is triggered (either automatically or manually by the agent in the Eugenia Control Panel).

The backend identifies the new lead.

Backend calls Gemini with the lead's details to generate an initial text message.

Backend calls Twilio to send the SMS to the lead's phone number.

Backend calls the FUB /textMessages endpoint to log the outgoing SMS.

Backend calls the FUB API to update the lead's status to "AI - Initial Contact Sent".

Backend generates a unique URL (e.g., https://your-app.com/conversation/12345) and calls the FUB API to update a custom field on the lead's record with this URL.

Backend logs the lead and the sent message to Airtable.

5.2. Agent Interaction Workflow
Agent is working in Follow Up Boss and sees a lead they want to check on.

They see a custom field "Eugenia Conversation Link" and click the unique URL.

The Eugenia Control Panel web app opens directly to that lead's conversation view.

The agent can read the entire conversation history, see Eugenia's status (e.g., "Active," "Paused"), and decide on a course of action.

Option A (Intervene): The agent types a message in the manual input box and sends it as Eugenia. The backend sends the SMS via Twilio and logs it.

Option B (Pause): The agent clicks the "Pause Engagement" button in the Eugenia Control Panel. The backend updates the lead's AI status in FUB/Airtable and ensures no more automated messages are sent until resumed.

5.3. Incoming SMS Workflow (The Core Conversation Loop)
A lead replies to an SMS from Eugenia.

Twilio sends the message content and sender's phone number to the backend's /webhook/twilio-sms endpoint.

The backend looks up the lead in FUB/Airtable using the phone number.

The backend calls the FUB /textMessages endpoint to log the incoming SMS. It also logs it to Airtable.

The backend checks the AI's status for this lead. If "Paused," it takes no further action (or notifies the agent).

If not paused, the backend fetches the recent conversation history from FUB/Airtable.

The backend sends the history and the new message to Gemini to generate Eugenia's next reply.

The backend analyzes the reply for "auto-pause" keywords. If found, it pauses the loop for this lead and updates the status in FUB.

If not paused, the backend sends Eugenia's reply via Twilio and logs the outgoing message to FUB and Airtable, continuing the loop.

6. Phase 2 & Future Features (Post-MVP)
AI Voice Calling: Implementing a calling feature to replicate Raiya Voice AI, potentially using Twilio Voice and real-time speech-to-text/text-to-speech services.

Multi-User / SaaS Capabilities: Refactoring the backend to support multiple user accounts with isolated data and API key configurations.

Analytics Dashboard: A view within the app showing key metrics like engagement rates, qualification success rates, etc.

Advanced Nurturing Sequences: Building more complex, long-term drip campaigns managed by Eugenia.

Direct Airtable CRM: Building out the Airtable base to potentially function as a standalone CRM, reducing dependency on FUB over time.
