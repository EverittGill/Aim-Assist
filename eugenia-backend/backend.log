
> eugenia-backend@1.0.0 start
> node server.js

Gemini service initialized successfully
Twilio credentials not configured - SMS features will not work
FUB service initialized successfully
Conversation service initialized successfully
Auth service initialized successfully
Eugenia Backend server is running on http://localhost:3001
GET /api/leads endpoint: Attempting to fetch real leads from FUB
GET /api/leads endpoint: Attempting to fetch real leads from FUB
Successfully fetched 100 leads from FUB.
Successfully fetched 100 leads from FUB.
Logging inbound SMS to FUB for lead 470: Can you see my previous messages?
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 1 messages (FUB empty)
ðŸŽ¯ Final context: 1 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Hi Test!  This is Eugenia from Your Awesome Realty..."
Logging inbound SMS to FUB for lead 470: wait, what can you do?
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 3 messages (FUB empty)
ðŸŽ¯ Final context: 3 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Hi Test!  I can help you find the perfect property..."
Logging inbound SMS to FUB for lead 470: the one on williston court for 595k
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 5 messages (FUB empty)
ðŸŽ¯ Final context: 5 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Hi Test!  I see you're interested in the Williston..."
Logging inbound SMS to FUB for lead 470: yes can you get me the address?
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 7 messages (FUB empty)
ðŸŽ¯ Final context: 7 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Hi Test!  One moment while I locate the address fo..."
Logging inbound SMS to FUB for lead 470: ok
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 9 messages (FUB empty)
ðŸŽ¯ Final context: 9 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Hi Test!  The address is 123 Williston Court.  Is ..."
Logging inbound SMS to FUB for lead 470: That's the wrong address
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 11 messages (FUB empty)
ðŸŽ¯ Final context: 11 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Hi Test!  My apologies!  Can you give me more deta..."
Logging inbound SMS to FUB for lead 470: can you see my previous messages?
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 13 messages (FUB empty)
ðŸŽ¯ Final context: 13 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Hi Test!  I apologize again. To help me find the r..."
Logging inbound SMS to FUB for lead 470: don't worry about the house. How much context do you have?
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 15 messages (FUB empty)
ðŸŽ¯ Final context: 15 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Hi Test!  I have access to your previous messages,..."
GET /api/leads endpoint: Attempting to fetch real leads from FUB
GET /api/leads endpoint: Attempting to fetch real leads from FUB
Successfully fetched 100 leads from FUB.
Successfully fetched 100 leads from FUB.
Logging inbound SMS to FUB for lead 470: hey what was the price I told you?
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 1 messages (FUB empty)
ðŸŽ¯ Final context: 1 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Hi Test!  I don't have a record of a price range y..."
GET /api/leads endpoint: Attempting to fetch real leads from FUB
GET /api/leads endpoint: Attempting to fetch real leads from FUB
Successfully fetched 100 leads from FUB.
Successfully fetched 100 leads from FUB.
Logging inbound SMS to FUB for lead 470: hey
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 1 messages (FUB empty)
ðŸŽ¯ Final context: 1 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Hey Test!  What can I help you find today?..."
Logging inbound SMS to FUB for lead 470: im interested in tne house
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 3 messages (FUB empty)
ðŸŽ¯ Final context: 3 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Hey Test!  Which house specifically?  To help me n..."
Logging inbound SMS to FUB for lead 470: amelis awlk
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 5 messages (FUB empty)
ðŸŽ¯ Final context: 5 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Hey Test!  I'm not familiar with "amelis awlk". Co..."
Logging inbound SMS to FUB for lead 470: its 85031 williston ct, fernandina beach fl, 32034
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 7 messages (FUB empty)
ðŸŽ¯ Final context: 7 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Okay Test, I see the property at 85031 Williston C..."
Logging inbound SMS to FUB for lead 470: what's the price
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 9 messages (FUB empty)
ðŸŽ¯ Final context: 9 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Hey Test!  The price for 85031 Williston Ct in Fer..."
Logging inbound SMS to FUB for lead 470: can you see my previous messages?
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 11 messages (FUB empty)
ðŸŽ¯ Final context: 11 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Hey Test! Yes, I can see you're interested in 8503..."
Logging inbound SMS to FUB for lead 470: what's your context?
Failed to log text message to FUB (400): {"errorMessage":"`toNumber` field is required"}
Error logging text message to FUB: Error: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
    at FUBService.logTextMessage (/Users/everittgill/Desktop/ISA project/eugenia-backend/services/fubService.js:124:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/everittgill/Desktop/ISA project/eugenia-backend/server.js:321:9
Failed to log incoming SMS to FUB: FUB SMS logging failed: {"errorMessage":"`toNumber` field is required"}
ðŸ§  Building complete context for lead 470...
Fetched 0 historical messages for lead 470
ðŸ“± Using frontend history: 13 messages (FUB empty)
ðŸŽ¯ Final context: 13 messages for lead Test Everitt
ðŸ¤– Generated AI response: "Hey Test!  My context is that you're interested in..."
